(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7278aa80"],{"07ed":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"primary",dark:"",icon:"",disabled:!t.doneFromCustomer},on:{click:t.show}},"v-btn",a,!1),r),[n("v-icon",[t._v("kitchen")])],1)]}}])},[n("span",[t._v("Order KOT")])]),n("v-menu",{staticClass:"elevation-4",attrs:{"position-x":t.x,"position-y":t.y,absolute:"","offset-y":"","close-on-content-click":!1,transition:"scale-transition","max-width":"400","nudge-top":"-20"},model:{value:t.showKOTMenu,callback:function(e){t.showKOTMenu=e},expression:"showKOTMenu"}},[n("v-list",{attrs:{dense:"",dark:"","max-width":"400"}},[n("v-list-item",[n("div",{staticClass:"kot-sub-header"},[n("v-icon",{staticClass:"star-icon",attrs:{size:"16"}},[t._v(" star ")]),n("span",[t._v("KOT PRINTER")])],1),n("div",{staticClass:"hint-for-kot"},[t._v(" Cheers! The first KOT has been already printed."),n("br"),t._v(" For another one, be sure you've updated cart item quantities. ")]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.attrs,a=e.on;return[n("v-btn",t._g(t._b({attrs:{icon:"",loading:t.generatingKot},on:{click:t.generatePostKot}},"v-btn",r,!1),a),[n("v-icon",[t._v("refresh")])],1)]}}])},[n("span",[t._v("Refresh KOT")])])],1),n("v-divider"),t._l(t.batchGroupedKOTItems,(function(e,r){return n("v-list-item-group",{key:r},[n("div",{staticClass:"d-flex justify-space-between align-center pa-2"},[n("v-chip",{staticClass:"point875",attrs:{label:"",small:""}},[t._v(" Batch: "+t._s(e.batch)+" ")]),n("v-btn",{attrs:{loading:t.creatingDoc,small:"",color:"orange",text:""},on:{click:function(n){return t.generateKOTPDF(e)}}},[t._v(" Print ")])],1),t._l(e.cartItems,(function(e,r){return n("v-list-item",{key:r+185,attrs:{disabled:""}},[n("v-list-item-avatar",[n("v-avatar",{attrs:{color:"grey",size:"30"}},[n("v-img",{attrs:{src:e.itemImage}})],1)],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.itemName))])],1),n("v-list-item-action-text",[n("span",{staticClass:"number-font",staticStyle:{"font-size":"26px"}},[t._v(" "+t._s(e.quantityDiff)+" ")])])],1)}))],2)})),n("v-divider"),n("v-list-item",[n("v-list-item-content",[n("p",{staticClass:"mb-0",staticStyle:{"font-size":"12px"}},[t._v(" Note: Only the first KOT is automatically generated. Preceding KOTs should be refreshed by the operator manually after updating the order. ")])])],1)],2)],1)],1)},a=[],i=(n("a9e3"),n("96cf"),n("1da1")),s=n("5530"),o=n("2f62"),c=n("8baf"),u=n("c473"),d={mixins:[u["a"]],props:{orderId:{type:Number,required:!0},doneFromCustomer:{type:Boolean,required:!0}},emits:["refresh"],data:function(){return{isLoading:null,showKOTMenu:!1,x:0,y:0,batchGroupedKOTItems:[],doc:null,creatingDoc:!1,generatingKot:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(o["b"])({orderKOTItems:"cart/orderKOTs"})),{},{document:function(){return{heading:"Food Swipe and Online Market Company Pvt. Ltd.",location:"New-road, Pokhara"}}}),created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$bus.on("refresh-kot-menu",t.initialize),e.next=3,t.initialize();case 3:case"end":return e.stop()}}),e)})))()},beforeUnmount:function(){this.$bus.off("refresh-kot-menu",this.initialize)},methods:{initialize:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.batchGroupedKOTItems=[],e.next=4,t.$store.dispatch("cart/fetchOrderKOT",{orderId:t.orderId});case 4:t.batchGroupedKOTItems=t.$helper.groupOrderKOTByBatch(t.orderKOTItems),t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},show:function(t){var e=this;t.preventDefault(),this.showKOTMenu=!1,this.x=t.clientX,this.y=t.clientY,this.$nextTick((function(){e.showKOTMenu=!0}))},generateKOTPDF:function(t){this.creatingDoc=!0,this.doc=new c["default"]({orientation:"portrait",uint:"in",format:"dl"}),this.$helper.generateKOTPDF(t,this.doc,this.orderId),this.creatingDoc=!1},generatePostKot:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.generatingKot=!0,e.next=3,t.$store.dispatch("cart/generatePostKotForOrder",{id:t.orderId});case 3:if(n=e.sent,t.generatingKot=!1,!n){e.next=11;break}return t.$emit("refresh"),e.next=9,t.initialize();case 9:e.next=13;break;case 11:return e.next=13,t.openSnack("Kot refresh failed.","error");case 13:case"end":return e.stop()}}),e)})))()}}},l=d,h=(n("09eb"),n("2877")),v=n("6544"),m=n.n(v),f=n("8212"),p=n("8336"),b=n("cc20"),g=n("ce7e"),O=n("132d"),K=n("adda"),T=n("8860"),w=n("da13"),k=n("5d23"),x=n("8270"),_=n("1baa"),y=n("e449"),I=n("3a2f"),C=Object(h["a"])(l,r,a,!1,null,"3aa6a7dd",null);e["default"]=C.exports;m()(C,{VAvatar:f["a"],VBtn:p["a"],VChip:b["a"],VDivider:g["a"],VIcon:O["a"],VImg:K["a"],VList:T["a"],VListItem:w["a"],VListItemActionText:k["a"],VListItemAvatar:x["a"],VListItemContent:k["b"],VListItemGroup:_["a"],VListItemTitle:k["d"],VMenu:y["a"],VTooltip:I["a"]})},"09eb":function(t,e,n){"use strict";n("53f1")},"53f1":function(t,e,n){}}]);
//# sourceMappingURL=chunk-7278aa80.29afcc8f.js.map